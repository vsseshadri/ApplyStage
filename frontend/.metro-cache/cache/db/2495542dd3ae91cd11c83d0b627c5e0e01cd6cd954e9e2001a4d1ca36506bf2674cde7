{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"./WorkletsError","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":48,"index":63}}],"key":"vXPuRilP/vaUIYuYdR30RgyRXtA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerWorkletStackDetails = registerWorkletStackDetails;\n  exports.reportFatalRemoteError = reportFatalRemoteError;\n  exports.registerReportFatalRemoteError = registerReportFatalRemoteError;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _WorkletsError = require(_dependencyMap[1], \"./WorkletsError\");\n  var _workletStackDetails = new Map();\n  function registerWorkletStackDetails(hash, stackDetails) {\n    _workletStackDetails.set(hash, stackDetails);\n  }\n  function getBundleOffset(error) {\n    var _error$stack;\n    var frame = (_error$stack = error.stack) == null || (_error$stack = _error$stack.split('\\n')) == null ? void 0 : _error$stack[0];\n    if (frame) {\n      var parsedFrame = /@([^@]+):(\\d+):(\\d+)/.exec(frame);\n      if (parsedFrame) {\n        var _parsedFrame = (0, _slicedToArray.default)(parsedFrame, 4),\n          file = _parsedFrame[1],\n          line = _parsedFrame[2],\n          col = _parsedFrame[3];\n        return [file, Number(line), Number(col)];\n      }\n    }\n    return ['unknown', 0, 0];\n  }\n  function processStack(stack) {\n    if (stack === '' || stack === undefined) {\n      return undefined;\n    }\n    var workletStackEntries = stack.match(/worklet_(\\d+):(\\d+):(\\d+)/g);\n    var result = stack;\n    workletStackEntries == null || workletStackEntries.forEach(function (match) {\n      var _match$split$map = match.split(/:|_/).map(Number),\n        _match$split$map2 = (0, _slicedToArray.default)(_match$split$map, 4),\n        hash = _match$split$map2[1],\n        origLine = _match$split$map2[2],\n        origCol = _match$split$map2[3];\n      var errorDetails = _workletStackDetails.get(hash);\n      if (!errorDetails) {\n        return;\n      }\n      var _errorDetails = (0, _slicedToArray.default)(errorDetails, 3),\n        error = _errorDetails[0],\n        lineOffset = _errorDetails[1],\n        colOffset = _errorDetails[2];\n      var _getBundleOffset = getBundleOffset(error),\n        _getBundleOffset2 = (0, _slicedToArray.default)(_getBundleOffset, 3),\n        bundleFile = _getBundleOffset2[0],\n        bundleLine = _getBundleOffset2[1],\n        bundleCol = _getBundleOffset2[2];\n      var line = origLine + bundleLine + lineOffset;\n      var col = origCol + bundleCol + colOffset;\n      result = result.replace(match, `${bundleFile}:${line}:${col}`);\n    });\n    return result;\n  }\n  /**\n   * Remote error is an error coming from a Worklet Runtime that we bubble up to\n   * the RN Runtime.\n   */\n  function reportFatalRemoteError(_ref, force) {\n    var message = _ref.message,\n      stack = _ref.stack,\n      name = _ref.name,\n      jsEngine = _ref.jsEngine;\n    var error = new _WorkletsError.WorkletsError();\n    error.message = message;\n    error.stack = processStack(stack);\n    error.name = name;\n    error.jsEngine = jsEngine;\n    if (force) {\n      throw error;\n    } else {\n      // @ts-expect-error React Native's `ErrorUtils` are hidden from the global scope.\n      globalThis.ErrorUtils.reportFatalError(error);\n    }\n  }\n\n  /**\n   * Registers `reportFatalRemoteError` function in global scope to allow to\n   * invoke it from C++.\n   */\n  function registerReportFatalRemoteError() {\n    globalThis.__reportFatalRemoteError = reportFatalRemoteError;\n  }\n});","lineCount":97,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,8,0,"exports"],[12,9,8,0],[12,10,8,0,"registerWorkletStackDetails"],[12,37,8,0],[12,40,8,0,"registerWorkletStackDetails"],[12,67,8,0],[13,2,57,0,"exports"],[13,9,57,0],[13,10,57,0,"reportFatalRemoteError"],[13,32,57,0],[13,35,57,0,"reportFatalRemoteError"],[13,57,57,0],[14,2,78,0,"exports"],[14,9,78,0],[14,10,78,0,"registerReportFatalRemoteError"],[14,40,78,0],[14,43,78,0,"registerReportFatalRemoteError"],[14,73,78,0],[15,2,80,1],[15,6,80,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,80,1],[15,42,80,1,"require"],[15,49,80,1],[15,50,80,1,"_dependencyMap"],[15,64,80,1],[16,2,80,1],[16,6,80,1,"_slicedToArray"],[16,20,80,1],[16,23,80,1,"_interopDefault"],[16,38,80,1],[16,39,80,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,80,1],[17,2,3,0],[17,6,3,0,"_WorkletsError"],[17,20,3,0],[17,23,3,0,"require"],[17,30,3,0],[17,31,3,0,"_dependencyMap"],[17,45,3,0],[18,2,6,0],[18,6,6,6,"_workletStackDetails"],[18,26,6,26],[18,29,6,29],[18,33,6,33,"Map"],[18,36,6,36],[18,37,6,66],[18,38,6,67],[19,2,8,7],[19,11,8,16,"registerWorkletStackDetails"],[19,38,8,43,"registerWorkletStackDetails"],[19,39,9,2,"hash"],[19,43,9,14],[19,45,10,2,"stackDetails"],[19,57,10,35],[19,59,11,2],[20,4,12,2,"_workletStackDetails"],[20,24,12,22],[20,25,12,23,"set"],[20,28,12,26],[20,29,12,27,"hash"],[20,33,12,31],[20,35,12,33,"stackDetails"],[20,47,12,45],[20,48,12,46],[21,2,13,0],[22,2,15,0],[22,11,15,9,"getBundleOffset"],[22,26,15,24,"getBundleOffset"],[22,27,15,25,"error"],[22,32,15,37],[22,34,15,65],[23,4,15,65],[23,8,15,65,"_error$stack"],[23,20,15,65],[24,4,16,2],[24,8,16,8,"frame"],[24,13,16,13],[24,17,16,13,"_error$stack"],[24,29,16,13],[24,32,16,16,"error"],[24,37,16,21],[24,38,16,22,"stack"],[24,43,16,27],[24,57,16,27,"_error$stack"],[24,69,16,27],[24,72,16,16,"_error$stack"],[24,84,16,16],[24,85,16,29,"split"],[24,90,16,34],[24,91,16,35],[24,95,16,39],[24,96,16,40],[24,117,16,16,"_error$stack"],[24,129,16,16],[24,130,16,43],[24,131,16,44],[24,132,16,45],[25,4,17,2],[25,8,17,6,"frame"],[25,13,17,11],[25,15,17,13],[26,6,18,4],[26,10,18,10,"parsedFrame"],[26,21,18,21],[26,24,18,24],[26,46,18,46],[26,47,18,47,"exec"],[26,51,18,51],[26,52,18,52,"frame"],[26,57,18,57],[26,58,18,58],[27,6,19,4],[27,10,19,8,"parsedFrame"],[27,21,19,19],[27,23,19,21],[28,8,20,6],[28,12,20,6,"_parsedFrame"],[28,24,20,6],[28,31,20,6,"_slicedToArray"],[28,45,20,6],[28,46,20,6,"default"],[28,53,20,6],[28,55,20,34,"parsedFrame"],[28,66,20,45],[29,10,20,15,"file"],[29,14,20,19],[29,17,20,19,"_parsedFrame"],[29,29,20,19],[30,10,20,21,"line"],[30,14,20,25],[30,17,20,25,"_parsedFrame"],[30,29,20,25],[31,10,20,27,"col"],[31,13,20,30],[31,16,20,30,"_parsedFrame"],[31,28,20,30],[32,8,21,6],[32,15,21,13],[32,16,21,14,"file"],[32,20,21,18],[32,22,21,20,"Number"],[32,28,21,26],[32,29,21,27,"line"],[32,33,21,31],[32,34,21,32],[32,36,21,34,"Number"],[32,42,21,40],[32,43,21,41,"col"],[32,46,21,44],[32,47,21,45],[32,48,21,46],[33,6,22,4],[34,4,23,2],[35,4,24,2],[35,11,24,9],[35,12,24,10],[35,21,24,19],[35,23,24,21],[35,24,24,22],[35,26,24,24],[35,27,24,25],[35,28,24,26],[36,2,25,0],[37,2,27,0],[37,11,27,9,"processStack"],[37,23,27,21,"processStack"],[37,24,27,22,"stack"],[37,29,27,36],[37,31,27,58],[38,4,28,2],[38,8,28,6,"stack"],[38,13,28,11],[38,18,28,16],[38,20,28,18],[38,24,28,22,"stack"],[38,29,28,27],[38,34,28,32,"undefined"],[38,43,28,41],[38,45,28,43],[39,6,29,4],[39,13,29,11,"undefined"],[39,22,29,20],[40,4,30,2],[41,4,31,2],[41,8,31,8,"workletStackEntries"],[41,27,31,27],[41,30,31,30,"stack"],[41,35,31,35],[41,36,31,36,"match"],[41,41,31,41],[41,42,31,42],[41,70,31,70],[41,71,31,71],[42,4,32,2],[42,8,32,6,"result"],[42,14,32,12],[42,17,32,15,"stack"],[42,22,32,20],[43,4,33,2,"workletStackEntries"],[43,23,33,21],[43,35,33,2,"workletStackEntries"],[43,54,33,21],[43,55,33,23,"forEach"],[43,62,33,30],[43,63,33,31],[43,73,33,32,"match"],[43,78,33,37],[43,80,33,42],[44,6,34,4],[44,10,34,4,"_match$split$map"],[44,26,34,4],[44,29,34,40,"match"],[44,34,34,45],[44,35,34,46,"split"],[44,40,34,51],[44,41,34,52],[44,46,34,57],[44,47,34,58],[44,48,34,59,"map"],[44,51,34,62],[44,52,34,63,"Number"],[44,58,34,69],[44,59,34,70],[45,8,34,70,"_match$split$map2"],[45,25,34,70],[45,32,34,70,"_slicedToArray"],[45,46,34,70],[45,47,34,70,"default"],[45,54,34,70],[45,56,34,70,"_match$split$map"],[45,72,34,70],[46,8,34,13,"hash"],[46,12,34,17],[46,15,34,17,"_match$split$map2"],[46,32,34,17],[47,8,34,19,"origLine"],[47,16,34,27],[47,19,34,27,"_match$split$map2"],[47,36,34,27],[48,8,34,29,"origCol"],[48,15,34,36],[48,18,34,36,"_match$split$map2"],[48,35,34,36],[49,6,35,4],[49,10,35,10,"errorDetails"],[49,22,35,22],[49,25,35,25,"_workletStackDetails"],[49,45,35,45],[49,46,35,46,"get"],[49,49,35,49],[49,50,35,50,"hash"],[49,54,35,54],[49,55,35,55],[50,6,36,4],[50,10,36,8],[50,11,36,9,"errorDetails"],[50,23,36,21],[50,25,36,23],[51,8,37,6],[52,6,38,4],[53,6,39,4],[53,10,39,4,"_errorDetails"],[53,23,39,4],[53,30,39,4,"_slicedToArray"],[53,44,39,4],[53,45,39,4,"default"],[53,52,39,4],[53,54,39,43,"errorDetails"],[53,66,39,55],[54,8,39,11,"error"],[54,13,39,16],[54,16,39,16,"_errorDetails"],[54,29,39,16],[55,8,39,18,"lineOffset"],[55,18,39,28],[55,21,39,28,"_errorDetails"],[55,34,39,28],[56,8,39,30,"colOffset"],[56,17,39,39],[56,20,39,39,"_errorDetails"],[56,33,39,39],[57,6,40,4],[57,10,40,4,"_getBundleOffset"],[57,26,40,4],[57,29,40,48,"getBundleOffset"],[57,44,40,63],[57,45,40,64,"error"],[57,50,40,69],[57,51,40,70],[58,8,40,70,"_getBundleOffset2"],[58,25,40,70],[58,32,40,70,"_slicedToArray"],[58,46,40,70],[58,47,40,70,"default"],[58,54,40,70],[58,56,40,70,"_getBundleOffset"],[58,72,40,70],[59,8,40,11,"bundleFile"],[59,18,40,21],[59,21,40,21,"_getBundleOffset2"],[59,38,40,21],[60,8,40,23,"bundleLine"],[60,18,40,33],[60,21,40,33,"_getBundleOffset2"],[60,38,40,33],[61,8,40,35,"bundleCol"],[61,17,40,44],[61,20,40,44,"_getBundleOffset2"],[61,37,40,44],[62,6,41,4],[62,10,41,10,"line"],[62,14,41,14],[62,17,41,17,"origLine"],[62,25,41,25],[62,28,41,28,"bundleLine"],[62,38,41,38],[62,41,41,41,"lineOffset"],[62,51,41,51],[63,6,42,4],[63,10,42,10,"col"],[63,13,42,13],[63,16,42,16,"origCol"],[63,23,42,23],[63,26,42,26,"bundleCol"],[63,35,42,35],[63,38,42,38,"colOffset"],[63,47,42,47],[64,6,44,4,"result"],[64,12,44,10],[64,15,44,13,"result"],[64,21,44,19],[64,22,44,20,"replace"],[64,29,44,27],[64,30,44,28,"match"],[64,35,44,33],[64,37,44,35],[64,40,44,38,"bundleFile"],[64,50,44,48],[64,54,44,52,"line"],[64,58,44,56],[64,62,44,60,"col"],[64,65,44,63],[64,67,44,65],[64,68,44,66],[65,4,45,2],[65,5,45,3],[65,6,45,4],[66,4,46,2],[66,11,46,9,"result"],[66,17,46,15],[67,2,47,0],[68,2,53,0],[69,0,54,0],[70,0,55,0],[71,0,56,0],[72,2,57,7],[72,11,57,16,"reportFatalRemoteError"],[72,33,57,38,"reportFatalRemoteError"],[72,34,57,38,"_ref"],[72,38,57,38],[72,40,59,2,"force"],[72,45,59,16],[72,47,60,8],[73,4,60,8],[73,8,58,4,"message"],[73,15,58,11],[73,18,58,11,"_ref"],[73,22,58,11],[73,23,58,4,"message"],[73,30,58,11],[74,6,58,13,"stack"],[74,11,58,18],[74,14,58,18,"_ref"],[74,18,58,18],[74,19,58,13,"stack"],[74,24,58,18],[75,6,58,20,"name"],[75,10,58,24],[75,13,58,24,"_ref"],[75,17,58,24],[75,18,58,20,"name"],[75,22,58,24],[76,6,58,26,"jsEngine"],[76,14,58,34],[76,17,58,34,"_ref"],[76,21,58,34],[76,22,58,26,"jsEngine"],[76,30,58,34],[77,4,61,2],[77,8,61,8,"error"],[77,13,61,13],[77,16,61,16],[77,20,61,20,"WorkletsError"],[77,34,61,33],[77,35,61,33,"WorkletsError"],[77,48,61,33],[77,49,61,34],[77,50,61,46],[78,4,62,2,"error"],[78,9,62,7],[78,10,62,8,"message"],[78,17,62,15],[78,20,62,18,"message"],[78,27,62,25],[79,4,63,2,"error"],[79,9,63,7],[79,10,63,8,"stack"],[79,15,63,13],[79,18,63,16,"processStack"],[79,30,63,28],[79,31,63,29,"stack"],[79,36,63,34],[79,37,63,35],[80,4,64,2,"error"],[80,9,64,7],[80,10,64,8,"name"],[80,14,64,12],[80,17,64,15,"name"],[80,21,64,19],[81,4,65,2,"error"],[81,9,65,7],[81,10,65,8,"jsEngine"],[81,18,65,16],[81,21,65,19,"jsEngine"],[81,29,65,27],[82,4,66,2],[82,8,66,6,"force"],[82,13,66,11],[82,15,66,13],[83,6,67,4],[83,12,67,10,"error"],[83,17,67,15],[84,4,68,2],[84,5,68,3],[84,11,68,9],[85,6,69,4],[86,6,70,4,"globalThis"],[86,16,70,14],[86,17,70,15,"ErrorUtils"],[86,27,70,25],[86,28,70,26,"reportFatalError"],[86,44,70,42],[86,45,70,43,"error"],[86,50,70,48],[86,51,70,49],[87,4,71,2],[88,2,72,0],[90,2,74,0],[91,0,75,0],[92,0,76,0],[93,0,77,0],[94,2,78,7],[94,11,78,16,"registerReportFatalRemoteError"],[94,41,78,46,"registerReportFatalRemoteError"],[94,42,78,46],[94,44,78,49],[95,4,79,2,"globalThis"],[95,14,79,12],[95,15,79,13,"__reportFatalRemoteError"],[95,39,79,37],[95,42,79,40,"reportFatalRemoteError"],[95,64,79,62],[96,2,80,0],[97,0,80,1],[97,3]],"functionMap":{"names":["<global>","registerWorkletStackDetails","getBundleOffset","processStack","workletStackEntries.forEach$argument_0","reportFatalRemoteError","registerReportFatalRemoteError"],"mappings":"AAA;OCO;CDK;AEE;CFU;AGE;+BCM;GDY;CHE;OKU;CLe;OMM;CNE"},"hasCjsExports":false},"type":"js/module"}]}