{"dependencies":[{"name":"../../global-state/router-store","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":23,"index":287},"end":{"line":6,"column":65,"index":329}}],"key":"34G8cf9eMVuL1UIt4w1T43KGPlk=","exportNames":["*"],"imports":1}},{"name":"../../global-state/routing","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":18,"index":349},"end":{"line":7,"column":55,"index":386}}],"key":"/KYD16J3C+S2+TKpFA4/GL5ghgM=","exportNames":["*"],"imports":1}},{"name":"../href","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":15,"index":403},"end":{"line":8,"column":33,"index":421}}],"key":"JFYDN89CjCE9uy6rzcI/l/zLru8=","exportNames":["*"],"imports":1}},{"name":"../../navigationParams","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":27,"index":450},"end":{"line":9,"column":60,"index":483}}],"key":"XAh+4Y1ikoKrpGxORep8MZ3uXwI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getTabPathFromRootStateByHref = getTabPathFromRootStateByHref;\n  exports.getPreloadedRouteFromRootStateByHref = getPreloadedRouteFromRootStateByHref;\n  exports.deepEqual = deepEqual;\n  var router_store_1 = require(_dependencyMap[0], \"../../global-state/router-store\");\n  var routing_1 = require(_dependencyMap[1], \"../../global-state/routing\");\n  var href_1 = require(_dependencyMap[2], \"../href\");\n  var navigationParams_1 = require(_dependencyMap[3], \"../../navigationParams\");\n  function getTabPathFromRootStateByHref(href, rootState) {\n    var hrefState = router_store_1.store.getStateForHref((0, href_1.resolveHref)(href));\n    var state = rootState;\n    if (!hrefState || !state) {\n      return [];\n    }\n    // Replicating the logic from `linkTo`\n    var _ref = (0, routing_1.findDivergentState)(hrefState, state, true),\n      navigationRoutes = _ref.navigationRoutes;\n    if (!navigationRoutes.length) {\n      return [];\n    }\n    var tabPath = [];\n    navigationRoutes.forEach(function (route, i, arr) {\n      var _route$state;\n      if (((_route$state = route.state) == null ? void 0 : _route$state.type) === 'tab') {\n        var tabState = route.state;\n        var oldTabKey = tabState.routes[tabState.index].key;\n        // The next route will be either stack inside a tab or a new tab key\n        if (!arr[i + 1]) {\n          throw new Error(`New tab route is missing for ${route.key}. This is likely an internal Expo Router bug.`);\n        }\n        var newTabKey = arr[i + 1].key;\n        tabPath.push({\n          oldTabKey: oldTabKey,\n          newTabKey: newTabKey\n        });\n      }\n    });\n    return tabPath;\n  }\n  function getPreloadedRouteFromRootStateByHref(href, rootState) {\n    var hrefState = router_store_1.store.getStateForHref((0, href_1.resolveHref)(href));\n    var state = rootState;\n    if (!hrefState || !state) {\n      return undefined;\n    }\n    // Replicating the logic from `linkTo`\n    var _ref2 = (0, routing_1.findDivergentState)(hrefState, state, true),\n      navigationState = _ref2.navigationState,\n      actionStateRoute = _ref2.actionStateRoute;\n    if (!navigationState || !actionStateRoute) {\n      return undefined;\n    }\n    if (navigationState.type === 'stack') {\n      var _activeRoute$params, _payload$params;\n      var stackState = navigationState;\n      var payload = (0, routing_1.getPayloadFromStateRoute)(actionStateRoute);\n      var preloadedRoute = stackState.preloadedRoutes.find(function (route) {\n        return route.name === actionStateRoute.name && deepEqual((0, navigationParams_1.removeInternalExpoRouterParams)(route.params), (0, navigationParams_1.removeInternalExpoRouterParams)(payload.params));\n      });\n      var activeRoute = stackState.routes[stackState.index];\n      // When the active route is the same as the preloaded route,\n      // then we should not navigate. It aligns with base link behavior.\n      if (activeRoute.name === (preloadedRoute == null ? void 0 : preloadedRoute.name) && deepEqual(\n      // using ?? {}, because from our perspective undefined === {}, as both mean no params\n      (0, navigationParams_1.removeInternalExpoRouterParams)((_activeRoute$params = activeRoute.params) != null ? _activeRoute$params : {}), (0, navigationParams_1.removeInternalExpoRouterParams)((_payload$params = payload.params) != null ? _payload$params : {}))) {\n        return undefined;\n      }\n      return preloadedRoute;\n    }\n    return undefined;\n  }\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n    if (a == null || b == null) {\n      return false;\n    }\n    if (typeof a !== 'object' || typeof b !== 'object') {\n      return false;\n    }\n    var keys = Object.keys(a);\n    return keys.length === Object.keys(b).length && keys.every(function (key) {\n      return deepEqual(a[key], b[key]);\n    });\n  }\n});","lineCount":92,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"getTabPathFromRootStateByHref"],[7,39,3,37],[7,42,3,40,"getTabPathFromRootStateByHref"],[7,71,3,69],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"getPreloadedRouteFromRootStateByHref"],[8,46,4,44],[8,49,4,47,"getPreloadedRouteFromRootStateByHref"],[8,85,4,83],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"deepEqual"],[9,19,5,17],[9,22,5,20,"deepEqual"],[9,31,5,29],[10,2,6,0],[10,6,6,6,"router_store_1"],[10,20,6,20],[10,23,6,23,"require"],[10,30,6,30],[10,31,6,30,"_dependencyMap"],[10,45,6,30],[10,83,6,64],[10,84,6,65],[11,2,7,0],[11,6,7,6,"routing_1"],[11,15,7,15],[11,18,7,18,"require"],[11,25,7,25],[11,26,7,25,"_dependencyMap"],[11,40,7,25],[11,73,7,54],[11,74,7,55],[12,2,8,0],[12,6,8,6,"href_1"],[12,12,8,12],[12,15,8,15,"require"],[12,22,8,22],[12,23,8,22,"_dependencyMap"],[12,37,8,22],[12,51,8,32],[12,52,8,33],[13,2,9,0],[13,6,9,6,"navigationParams_1"],[13,24,9,24],[13,27,9,27,"require"],[13,34,9,34],[13,35,9,34,"_dependencyMap"],[13,49,9,34],[13,78,9,59],[13,79,9,60],[14,2,10,0],[14,11,10,9,"getTabPathFromRootStateByHref"],[14,40,10,38,"getTabPathFromRootStateByHref"],[14,41,10,39,"href"],[14,45,10,43],[14,47,10,45,"rootState"],[14,56,10,54],[14,58,10,56],[15,4,11,4],[15,8,11,10,"hrefState"],[15,17,11,19],[15,20,11,22,"router_store_1"],[15,34,11,36],[15,35,11,37,"store"],[15,40,11,42],[15,41,11,43,"getStateForHref"],[15,56,11,58],[15,57,11,59],[15,58,11,60],[15,59,11,61],[15,61,11,63,"href_1"],[15,67,11,69],[15,68,11,70,"resolveHref"],[15,79,11,81],[15,81,11,83,"href"],[15,85,11,87],[15,86,11,88],[15,87,11,89],[16,4,12,4],[16,8,12,10,"state"],[16,13,12,15],[16,16,12,18,"rootState"],[16,25,12,27],[17,4,13,4],[17,8,13,8],[17,9,13,9,"hrefState"],[17,18,13,18],[17,22,13,22],[17,23,13,23,"state"],[17,28,13,28],[17,30,13,30],[18,6,14,8],[18,13,14,15],[18,15,14,17],[19,4,15,4],[20,4,16,4],[21,4,17,4],[21,8,17,4,"_ref"],[21,12,17,4],[21,15,17,33],[21,16,17,34],[21,17,17,35],[21,19,17,37,"routing_1"],[21,28,17,46],[21,29,17,47,"findDivergentState"],[21,47,17,65],[21,49,17,67,"hrefState"],[21,58,17,76],[21,60,17,78,"state"],[21,65,17,83],[21,67,17,85],[21,71,17,89],[21,72,17,90],[22,6,17,12,"navigationRoutes"],[22,22,17,28],[22,25,17,28,"_ref"],[22,29,17,28],[22,30,17,12,"navigationRoutes"],[22,46,17,28],[23,4,18,4],[23,8,18,8],[23,9,18,9,"navigationRoutes"],[23,25,18,25],[23,26,18,26,"length"],[23,32,18,32],[23,34,18,34],[24,6,19,8],[24,13,19,15],[24,15,19,17],[25,4,20,4],[26,4,21,4],[26,8,21,10,"tabPath"],[26,15,21,17],[26,18,21,20],[26,20,21,22],[27,4,22,4,"navigationRoutes"],[27,20,22,20],[27,21,22,21,"forEach"],[27,28,22,28],[27,29,22,29],[27,39,22,30,"route"],[27,44,22,35],[27,46,22,37,"i"],[27,47,22,38],[27,49,22,40,"arr"],[27,52,22,43],[27,54,22,48],[28,6,22,48],[28,10,22,48,"_route$state"],[28,22,22,48],[29,6,23,8],[29,10,23,12],[29,12,23,12,"_route$state"],[29,24,23,12],[29,27,23,12,"route"],[29,32,23,17],[29,33,23,18,"state"],[29,38,23,23],[29,59,23,12,"_route$state"],[29,71,23,12],[29,72,23,25,"type"],[29,76,23,29],[29,82,23,34],[29,87,23,39],[29,89,23,41],[30,8,24,12],[30,12,24,18,"tabState"],[30,20,24,26],[30,23,24,29,"route"],[30,28,24,34],[30,29,24,35,"state"],[30,34,24,40],[31,8,25,12],[31,12,25,18,"oldTabKey"],[31,21,25,27],[31,24,25,30,"tabState"],[31,32,25,38],[31,33,25,39,"routes"],[31,39,25,45],[31,40,25,46,"tabState"],[31,48,25,54],[31,49,25,55,"index"],[31,54,25,60],[31,55,25,61],[31,56,25,62,"key"],[31,59,25,65],[32,8,26,12],[33,8,27,12],[33,12,27,16],[33,13,27,17,"arr"],[33,16,27,20],[33,17,27,21,"i"],[33,18,27,22],[33,21,27,25],[33,22,27,26],[33,23,27,27],[33,25,27,29],[34,10,28,16],[34,16,28,22],[34,20,28,26,"Error"],[34,25,28,31],[34,26,28,32],[34,58,28,64,"route"],[34,63,28,69],[34,64,28,70,"key"],[34,67,28,73],[34,114,28,120],[34,115,28,121],[35,8,29,12],[36,8,30,12],[36,12,30,18,"newTabKey"],[36,21,30,27],[36,24,30,30,"arr"],[36,27,30,33],[36,28,30,34,"i"],[36,29,30,35],[36,32,30,38],[36,33,30,39],[36,34,30,40],[36,35,30,41,"key"],[36,38,30,44],[37,8,31,12,"tabPath"],[37,15,31,19],[37,16,31,20,"push"],[37,20,31,24],[37,21,31,25],[38,10,31,27,"oldTabKey"],[38,19,31,36],[38,21,31,27,"oldTabKey"],[38,30,31,36],[39,10,31,38,"newTabKey"],[39,19,31,47],[39,21,31,38,"newTabKey"],[40,8,31,48],[40,9,31,49],[40,10,31,50],[41,6,32,8],[42,4,33,4],[42,5,33,5],[42,6,33,6],[43,4,34,4],[43,11,34,11,"tabPath"],[43,18,34,18],[44,2,35,0],[45,2,36,0],[45,11,36,9,"getPreloadedRouteFromRootStateByHref"],[45,47,36,45,"getPreloadedRouteFromRootStateByHref"],[45,48,36,46,"href"],[45,52,36,50],[45,54,36,52,"rootState"],[45,63,36,61],[45,65,36,63],[46,4,37,4],[46,8,37,10,"hrefState"],[46,17,37,19],[46,20,37,22,"router_store_1"],[46,34,37,36],[46,35,37,37,"store"],[46,40,37,42],[46,41,37,43,"getStateForHref"],[46,56,37,58],[46,57,37,59],[46,58,37,60],[46,59,37,61],[46,61,37,63,"href_1"],[46,67,37,69],[46,68,37,70,"resolveHref"],[46,79,37,81],[46,81,37,83,"href"],[46,85,37,87],[46,86,37,88],[46,87,37,89],[47,4,38,4],[47,8,38,10,"state"],[47,13,38,15],[47,16,38,18,"rootState"],[47,25,38,27],[48,4,39,4],[48,8,39,8],[48,9,39,9,"hrefState"],[48,18,39,18],[48,22,39,22],[48,23,39,23,"state"],[48,28,39,28],[48,30,39,30],[49,6,40,8],[49,13,40,15,"undefined"],[49,22,40,24],[50,4,41,4],[51,4,42,4],[52,4,43,4],[52,8,43,4,"_ref2"],[52,13,43,4],[52,16,43,50],[52,17,43,51],[52,18,43,52],[52,20,43,54,"routing_1"],[52,29,43,63],[52,30,43,64,"findDivergentState"],[52,48,43,82],[52,50,43,84,"hrefState"],[52,59,43,93],[52,61,43,95,"state"],[52,66,43,100],[52,68,43,102],[52,72,43,106],[52,73,43,107],[53,6,43,12,"navigationState"],[53,21,43,27],[53,24,43,27,"_ref2"],[53,29,43,27],[53,30,43,12,"navigationState"],[53,45,43,27],[54,6,43,29,"actionStateRoute"],[54,22,43,45],[54,25,43,45,"_ref2"],[54,30,43,45],[54,31,43,29,"actionStateRoute"],[54,47,43,45],[55,4,44,4],[55,8,44,8],[55,9,44,9,"navigationState"],[55,24,44,24],[55,28,44,28],[55,29,44,29,"actionStateRoute"],[55,45,44,45],[55,47,44,47],[56,6,45,8],[56,13,45,15,"undefined"],[56,22,45,24],[57,4,46,4],[58,4,47,4],[58,8,47,8,"navigationState"],[58,23,47,23],[58,24,47,24,"type"],[58,28,47,28],[58,33,47,33],[58,40,47,40],[58,42,47,42],[59,6,47,42],[59,10,47,42,"_activeRoute$params"],[59,29,47,42],[59,31,47,42,"_payload$params"],[59,46,47,42],[60,6,48,8],[60,10,48,14,"stackState"],[60,20,48,24],[60,23,48,27,"navigationState"],[60,38,48,42],[61,6,49,8],[61,10,49,14,"payload"],[61,17,49,21],[61,20,49,24],[61,21,49,25],[61,22,49,26],[61,24,49,28,"routing_1"],[61,33,49,37],[61,34,49,38,"getPayloadFromStateRoute"],[61,58,49,62],[61,60,49,64,"actionStateRoute"],[61,76,49,80],[61,77,49,81],[62,6,50,8],[62,10,50,14,"preloadedRoute"],[62,24,50,28],[62,27,50,31,"stackState"],[62,37,50,41],[62,38,50,42,"preloadedRoutes"],[62,53,50,57],[62,54,50,58,"find"],[62,58,50,62],[62,59,50,63],[62,69,50,64,"route"],[62,74,50,69],[63,8,50,69],[63,15,50,74,"route"],[63,20,50,79],[63,21,50,80,"name"],[63,25,50,84],[63,30,50,89,"actionStateRoute"],[63,46,50,105],[63,47,50,106,"name"],[63,51,50,110],[63,55,51,12,"deepEqual"],[63,64,51,21],[63,65,51,22],[63,66,51,23],[63,67,51,24],[63,69,51,26,"navigationParams_1"],[63,87,51,44],[63,88,51,45,"removeInternalExpoRouterParams"],[63,118,51,75],[63,120,51,77,"route"],[63,125,51,82],[63,126,51,83,"params"],[63,132,51,89],[63,133,51,90],[63,135,51,92],[63,136,51,93],[63,137,51,94],[63,139,51,96,"navigationParams_1"],[63,157,51,114],[63,158,51,115,"removeInternalExpoRouterParams"],[63,188,51,145],[63,190,51,147,"payload"],[63,197,51,154],[63,198,51,155,"params"],[63,204,51,161],[63,205,51,162],[63,206,51,163],[64,6,51,163],[64,8,51,164],[65,6,52,8],[65,10,52,14,"activeRoute"],[65,21,52,25],[65,24,52,28,"stackState"],[65,34,52,38],[65,35,52,39,"routes"],[65,41,52,45],[65,42,52,46,"stackState"],[65,52,52,56],[65,53,52,57,"index"],[65,58,52,62],[65,59,52,63],[66,6,53,8],[67,6,54,8],[68,6,55,8],[68,10,55,12,"activeRoute"],[68,21,55,23],[68,22,55,24,"name"],[68,26,55,28],[68,32,55,33,"preloadedRoute"],[68,46,55,47],[68,66,55,33,"preloadedRoute"],[68,80,55,47],[68,81,55,49,"name"],[68,85,55,53],[68,90,56,12,"deepEqual"],[68,99,56,21],[69,6,57,12],[70,6,58,12],[70,7,58,13],[70,8,58,14],[70,10,58,16,"navigationParams_1"],[70,28,58,34],[70,29,58,35,"removeInternalExpoRouterParams"],[70,59,58,65],[70,62,58,65,"_activeRoute$params"],[70,81,58,65],[70,84,58,67,"activeRoute"],[70,95,58,78],[70,96,58,79,"params"],[70,102,58,85],[70,114,58,85,"_activeRoute$params"],[70,133,58,85],[70,136,58,89],[70,137,58,90],[70,138,58,91],[70,139,58,92],[70,141,58,94],[70,142,58,95],[70,143,58,96],[70,145,58,98,"navigationParams_1"],[70,163,58,116],[70,164,58,117,"removeInternalExpoRouterParams"],[70,194,58,147],[70,197,58,147,"_payload$params"],[70,212,58,147],[70,215,58,149,"payload"],[70,222,58,156],[70,223,58,157,"params"],[70,229,58,163],[70,241,58,163,"_payload$params"],[70,256,58,163],[70,259,58,167],[70,260,58,168],[70,261,58,169],[70,262,58,170],[70,263,58,171],[70,265,58,173],[71,8,59,12],[71,15,59,19,"undefined"],[71,24,59,28],[72,6,60,8],[73,6,61,8],[73,13,61,15,"preloadedRoute"],[73,27,61,29],[74,4,62,4],[75,4,63,4],[75,11,63,11,"undefined"],[75,20,63,20],[76,2,64,0],[77,2,65,0],[77,11,65,9,"deepEqual"],[77,20,65,18,"deepEqual"],[77,21,65,19,"a"],[77,22,65,20],[77,24,65,22,"b"],[77,25,65,23],[77,27,65,25],[78,4,66,4],[78,8,66,8,"a"],[78,9,66,9],[78,14,66,14,"b"],[78,15,66,15],[78,17,66,17],[79,6,67,8],[79,13,67,15],[79,17,67,19],[80,4,68,4],[81,4,69,4],[81,8,69,8,"a"],[81,9,69,9],[81,13,69,13],[81,17,69,17],[81,21,69,21,"b"],[81,22,69,22],[81,26,69,26],[81,30,69,30],[81,32,69,32],[82,6,70,8],[82,13,70,15],[82,18,70,20],[83,4,71,4],[84,4,72,4],[84,8,72,8],[84,15,72,15,"a"],[84,16,72,16],[84,21,72,21],[84,29,72,29],[84,33,72,33],[84,40,72,40,"b"],[84,41,72,41],[84,46,72,46],[84,54,72,54],[84,56,72,56],[85,6,73,8],[85,13,73,15],[85,18,73,20],[86,4,74,4],[87,4,75,4],[87,8,75,10,"keys"],[87,12,75,14],[87,15,75,17,"Object"],[87,21,75,23],[87,22,75,24,"keys"],[87,26,75,28],[87,27,75,29,"a"],[87,28,75,30],[87,29,75,31],[88,4,76,4],[88,11,76,11,"keys"],[88,15,76,15],[88,16,76,16,"length"],[88,22,76,22],[88,27,76,27,"Object"],[88,33,76,33],[88,34,76,34,"keys"],[88,38,76,38],[88,39,76,39,"b"],[88,40,76,40],[88,41,76,41],[88,42,76,42,"length"],[88,48,76,48],[88,52,76,52,"keys"],[88,56,76,56],[88,57,76,57,"every"],[88,62,76,62],[88,63,76,63],[88,73,76,64,"key"],[88,76,76,67],[89,6,76,67],[89,13,76,72,"deepEqual"],[89,22,76,81],[89,23,76,82,"a"],[89,24,76,83],[89,25,76,84,"key"],[89,28,76,87],[89,29,76,88],[89,31,76,90,"b"],[89,32,76,91],[89,33,76,92,"key"],[89,36,76,95],[89,37,76,96],[89,38,76,97],[90,4,76,97],[90,6,76,98],[91,2,77,0],[92,0,77,1],[92,3]],"functionMap":{"names":["<global>","getTabPathFromRootStateByHref","navigationRoutes.forEach$argument_0","getPreloadedRouteFromRootStateByHref","stackState.preloadedRoutes.find$argument_0","deepEqual","keys.every$argument_0"],"mappings":"AAA;ACS;6BCY;KDW;CDE;AGC;+DCc;mKDC;CHa;AKC;+DCW,kCD;CLC"},"hasCjsExports":true},"type":"js/module"}]}