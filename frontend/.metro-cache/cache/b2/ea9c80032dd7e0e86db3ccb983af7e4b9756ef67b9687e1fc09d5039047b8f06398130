{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"X490zePjq+0IljAc8X0qcBg0iTo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../proxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":14},"end":{"line":2,"column":72,"index":86}}],"key":"7t6p+wFqa3TKNDAU+WlzybERgtk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersDefineProperty = require(_dependencyMap[0], \"@babel/runtime/helpers/defineProperty\");\n  var _defineProperty = _interopDefault(_babelRuntimeHelpersDefineProperty);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _proxy = require(_dependencyMap[3], \"../proxy\");\n  /**\n   * This class is responsible for managing the registry of CSS animation\n   * keyframes. It keeps track of views that use specific animations and handles\n   * native-side registration. Animation keyframes are registered on the native\n   * side only when used for the first time and unregistered when removed from the\n   * last view that uses them.\n   */\n  var CSSKeyframesRegistry = /*#__PURE__*/function () {\n    function CSSKeyframesRegistry() {\n      (0, _classCallCheck.default)(this, CSSKeyframesRegistry);\n      this.cssTextToNameMap_ = new Map();\n      this.nameToKeyframes_ = new Map();\n    }\n    return (0, _createClass.default)(CSSKeyframesRegistry, [{\n      key: \"get\",\n      value: function get(nameOrCssText) {\n        var result = this.nameToKeyframes_.get(nameOrCssText);\n        if (result) {\n          return result.keyframesRule;\n        }\n        var animationName = this.cssTextToNameMap_.get(nameOrCssText);\n        if (animationName) {\n          var _this$nameToKeyframes;\n          return (_this$nameToKeyframes = this.nameToKeyframes_.get(animationName)) == null ? void 0 : _this$nameToKeyframes.keyframesRule;\n        }\n      }\n    }, {\n      key: \"add\",\n      value: function add(keyframesRule, viewName, viewTag) {\n        var existingKeyframesEntry = this.nameToKeyframes_.get(keyframesRule.name);\n        var existingComponentEntry = existingKeyframesEntry == null ? void 0 : existingKeyframesEntry.usedBy[viewName];\n        if (existingComponentEntry) {\n          // Just add the view tag to the existing component entry if keyframes\n          // for the specific animation and component name are already registered\n          existingComponentEntry.add(viewTag);\n          return;\n        }\n\n        // Otherwise, we have to register keyframes preprocessed for the specific\n        // component name\n        if (existingKeyframesEntry) {\n          existingKeyframesEntry.usedBy[viewName] = new Set([viewTag]);\n        } else {\n          this.nameToKeyframes_.set(keyframesRule.name, {\n            keyframesRule: keyframesRule,\n            usedBy: (0, _defineProperty.default)({}, viewName, new Set([viewTag]))\n          });\n        }\n\n        // Store the keyframes to name mapping in order to reuse the same\n        // animation name when possible (when the same inline keyframes object\n        // is used)\n        this.cssTextToNameMap_.set(keyframesRule.cssText, keyframesRule.name);\n\n        // Register animation keyframes only if they are not already registered\n        // (when they are added for the first time)\n        (0, _proxy.registerCSSKeyframes)(keyframesRule.name, viewName, keyframesRule.getNormalizedKeyframesConfig(viewName));\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(animationName, viewName, viewTag) {\n        var keyframesEntry = this.nameToKeyframes_.get(animationName);\n        if (!keyframesEntry) {\n          return;\n        }\n        var componentEntry = keyframesEntry.usedBy[viewName];\n        componentEntry.delete(viewTag);\n        if (componentEntry.size === 0) {\n          delete keyframesEntry.usedBy[viewName];\n          (0, _proxy.unregisterCSSKeyframes)(animationName, viewName);\n        }\n        if (Object.keys(keyframesEntry.usedBy).length === 0) {\n          this.nameToKeyframes_.delete(animationName);\n          this.cssTextToNameMap_.delete(keyframesEntry.keyframesRule.cssText);\n        }\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this.nameToKeyframes_.clear();\n        this.cssTextToNameMap_.clear();\n      }\n    }]);\n  }();\n  var cssKeyframesRegistry = new CSSKeyframesRegistry();\n  var _default = cssKeyframesRegistry;\n});","lineCount":111,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,99,0,"Object"],[12,8,99,0],[12,9,99,0,"defineProperty"],[12,23,99,0],[12,24,99,0,"exports"],[12,31,99,0],[13,4,99,0,"enumerable"],[13,14,99,0],[14,4,99,0,"get"],[14,7,99,0],[14,18,99,0,"get"],[14,19,99,0],[15,6,99,0],[15,13,99,0,"_default"],[15,21,99,0],[16,4,99,0],[17,2,99,0],[18,2,99,36],[18,6,99,36,"_babelRuntimeHelpersDefineProperty"],[18,40,99,36],[18,43,99,36,"require"],[18,50,99,36],[18,51,99,36,"_dependencyMap"],[18,65,99,36],[19,2,99,36],[19,6,99,36,"_defineProperty"],[19,21,99,36],[19,24,99,36,"_interopDefault"],[19,39,99,36],[19,40,99,36,"_babelRuntimeHelpersDefineProperty"],[19,74,99,36],[20,2,99,36],[20,6,99,36,"_babelRuntimeHelpersClassCallCheck"],[20,40,99,36],[20,43,99,36,"require"],[20,50,99,36],[20,51,99,36,"_dependencyMap"],[20,65,99,36],[21,2,99,36],[21,6,99,36,"_classCallCheck"],[21,21,99,36],[21,24,99,36,"_interopDefault"],[21,39,99,36],[21,40,99,36,"_babelRuntimeHelpersClassCallCheck"],[21,74,99,36],[22,2,99,36],[22,6,99,36,"_babelRuntimeHelpersCreateClass"],[22,37,99,36],[22,40,99,36,"require"],[22,47,99,36],[22,48,99,36,"_dependencyMap"],[22,62,99,36],[23,2,99,36],[23,6,99,36,"_createClass"],[23,18,99,36],[23,21,99,36,"_interopDefault"],[23,36,99,36],[23,37,99,36,"_babelRuntimeHelpersCreateClass"],[23,68,99,36],[24,2,2,0],[24,6,2,0,"_proxy"],[24,12,2,0],[24,15,2,0,"require"],[24,22,2,0],[24,23,2,0,"_dependencyMap"],[24,37,2,0],[25,2,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[32,2,10,0],[32,6,17,6,"CSSKeyframesRegistry"],[32,26,17,26],[33,4,17,26],[33,13,17,26,"CSSKeyframesRegistry"],[33,34,17,26],[34,6,17,26],[34,10,17,26,"_classCallCheck"],[34,25,17,26],[34,26,17,26,"default"],[34,33,17,26],[34,41,17,26,"CSSKeyframesRegistry"],[34,61,17,26],[35,6,17,26],[35,11,18,19,"cssTextToNameMap_"],[35,28,18,36],[35,31,18,60],[35,35,18,64,"Map"],[35,38,18,67],[35,39,18,68],[35,40,18,69],[36,6,18,69],[36,11,19,19,"nameToKeyframes_"],[36,27,19,35],[36,30,19,67],[36,34,19,71,"Map"],[36,37,19,74],[36,38,19,75],[36,39,19,76],[37,4,19,76],[38,4,19,76],[38,15,19,76,"_createClass"],[38,27,19,76],[38,28,19,76,"default"],[38,35,19,76],[38,37,19,76,"CSSKeyframesRegistry"],[38,57,19,76],[39,6,19,76,"key"],[39,9,19,76],[40,6,19,76,"value"],[40,11,19,76],[40,13,21,2],[40,22,21,2,"get"],[40,25,21,5,"get"],[40,26,21,6,"nameOrCssText"],[40,39,21,27],[40,41,21,29],[41,8,22,4],[41,12,22,10,"result"],[41,18,22,16],[41,21,22,19],[41,25,22,23],[41,26,22,24,"nameToKeyframes_"],[41,42,22,40],[41,43,22,41,"get"],[41,46,22,44],[41,47,22,45,"nameOrCssText"],[41,60,22,58],[41,61,22,59],[42,8,23,4],[42,12,23,8,"result"],[42,18,23,14],[42,20,23,16],[43,10,24,6],[43,17,24,13,"result"],[43,23,24,19],[43,24,24,20,"keyframesRule"],[43,37,24,33],[44,8,25,4],[45,8,27,4],[45,12,27,10,"animationName"],[45,25,27,23],[45,28,27,26],[45,32,27,30],[45,33,27,31,"cssTextToNameMap_"],[45,50,27,48],[45,51,27,49,"get"],[45,54,27,52],[45,55,27,53,"nameOrCssText"],[45,68,27,66],[45,69,27,67],[46,8,28,4],[46,12,28,8,"animationName"],[46,25,28,21],[46,27,28,23],[47,10,28,23],[47,14,28,23,"_this$nameToKeyframes"],[47,35,28,23],[48,10,29,6],[48,18,29,6,"_this$nameToKeyframes"],[48,39,29,6],[48,42,29,13],[48,46,29,17],[48,47,29,18,"nameToKeyframes_"],[48,63,29,34],[48,64,29,35,"get"],[48,67,29,38],[48,68,29,39,"animationName"],[48,81,29,52],[48,82,29,53],[48,103,29,13,"_this$nameToKeyframes"],[48,124,29,13],[48,125,29,55,"keyframesRule"],[48,138,29,68],[49,8,30,4],[50,6,31,2],[51,4,31,3],[52,6,31,3,"key"],[52,9,31,3],[53,6,31,3,"value"],[53,11,31,3],[53,13,33,2],[53,22,33,2,"add"],[53,25,33,5,"add"],[53,26,33,6,"keyframesRule"],[53,39,33,41],[53,41,33,43,"viewName"],[53,49,33,59],[53,51,33,61,"viewTag"],[53,58,33,76],[53,60,33,78],[54,8,34,4],[54,12,34,10,"existingKeyframesEntry"],[54,34,34,32],[54,37,34,35],[54,41,34,39],[54,42,34,40,"nameToKeyframes_"],[54,58,34,56],[54,59,34,57,"get"],[54,62,34,60],[54,63,35,6,"keyframesRule"],[54,76,35,19],[54,77,35,20,"name"],[54,81,36,4],[54,82,36,5],[55,8,37,4],[55,12,37,10,"existingComponentEntry"],[55,34,37,32],[55,37,37,35,"existingKeyframesEntry"],[55,59,37,57],[55,79,37,35,"existingKeyframesEntry"],[55,101,37,57],[55,102,37,59,"usedBy"],[55,108,37,65],[55,109,37,66,"viewName"],[55,117,37,74],[55,118,37,75],[56,8,39,4],[56,12,39,8,"existingComponentEntry"],[56,34,39,30],[56,36,39,32],[57,10,40,6],[58,10,41,6],[59,10,42,6,"existingComponentEntry"],[59,32,42,28],[59,33,42,29,"add"],[59,36,42,32],[59,37,42,33,"viewTag"],[59,44,42,40],[59,45,42,41],[60,10,43,6],[61,8,44,4],[63,8,46,4],[64,8,47,4],[65,8,48,4],[65,12,48,8,"existingKeyframesEntry"],[65,34,48,30],[65,36,48,32],[66,10,49,6,"existingKeyframesEntry"],[66,32,49,28],[66,33,49,29,"usedBy"],[66,39,49,35],[66,40,49,36,"viewName"],[66,48,49,44],[66,49,49,45],[66,52,49,48],[66,56,49,52,"Set"],[66,59,49,55],[66,60,49,56],[66,61,49,57,"viewTag"],[66,68,49,64],[66,69,49,65],[66,70,49,66],[67,8,50,4],[67,9,50,5],[67,15,50,11],[68,10,51,6],[68,14,51,10],[68,15,51,11,"nameToKeyframes_"],[68,31,51,27],[68,32,51,28,"set"],[68,35,51,31],[68,36,51,32,"keyframesRule"],[68,49,51,45],[68,50,51,46,"name"],[68,54,51,50],[68,56,51,52],[69,12,52,8,"keyframesRule"],[69,25,52,21],[69,27,52,8,"keyframesRule"],[69,40,52,21],[70,12,53,8,"usedBy"],[70,18,53,14],[70,24,53,14,"_defineProperty"],[70,39,53,14],[70,40,53,14,"default"],[70,47,53,14],[70,53,53,19,"viewName"],[70,61,53,27],[70,63,53,30],[70,67,53,34,"Set"],[70,70,53,37],[70,71,53,38],[70,72,53,39,"viewTag"],[70,79,53,46],[70,80,53,47],[70,81,53,48],[71,10,54,6],[71,11,54,7],[71,12,54,8],[72,8,55,4],[74,8,57,4],[75,8,58,4],[76,8,59,4],[77,8,60,4],[77,12,60,8],[77,13,60,9,"cssTextToNameMap_"],[77,30,60,26],[77,31,60,27,"set"],[77,34,60,30],[77,35,60,31,"keyframesRule"],[77,48,60,44],[77,49,60,45,"cssText"],[77,56,60,52],[77,58,60,54,"keyframesRule"],[77,71,60,67],[77,72,60,68,"name"],[77,76,60,72],[77,77,60,73],[79,8,62,4],[80,8,63,4],[81,8,64,4],[81,12,64,4,"registerCSSKeyframes"],[81,18,64,24],[81,19,64,24,"registerCSSKeyframes"],[81,39,64,24],[81,41,65,6,"keyframesRule"],[81,54,65,19],[81,55,65,20,"name"],[81,59,65,24],[81,61,66,6,"viewName"],[81,69,66,14],[81,71,67,6,"keyframesRule"],[81,84,67,19],[81,85,67,20,"getNormalizedKeyframesConfig"],[81,113,67,48],[81,114,67,49,"viewName"],[81,122,67,57],[81,123,68,4],[81,124,68,5],[82,6,69,2],[83,4,69,3],[84,6,69,3,"key"],[84,9,69,3],[85,6,69,3,"value"],[85,11,69,3],[85,13,71,2],[85,22,71,2,"remove"],[85,28,71,8,"remove"],[85,29,71,9,"animationName"],[85,42,71,30],[85,44,71,32,"viewName"],[85,52,71,48],[85,54,71,50,"viewTag"],[85,61,71,65],[85,63,71,67],[86,8,72,4],[86,12,72,10,"keyframesEntry"],[86,26,72,24],[86,29,72,27],[86,33,72,31],[86,34,72,32,"nameToKeyframes_"],[86,50,72,48],[86,51,72,49,"get"],[86,54,72,52],[86,55,72,53,"animationName"],[86,68,72,66],[86,69,72,67],[87,8,73,4],[87,12,73,8],[87,13,73,9,"keyframesEntry"],[87,27,73,23],[87,29,73,25],[88,10,74,6],[89,8,75,4],[90,8,77,4],[90,12,77,10,"componentEntry"],[90,26,77,24],[90,29,77,27,"keyframesEntry"],[90,43,77,41],[90,44,77,42,"usedBy"],[90,50,77,48],[90,51,77,49,"viewName"],[90,59,77,57],[90,60,77,58],[91,8,78,4,"componentEntry"],[91,22,78,18],[91,23,78,19,"delete"],[91,29,78,25],[91,30,78,26,"viewTag"],[91,37,78,33],[91,38,78,34],[92,8,80,4],[92,12,80,8,"componentEntry"],[92,26,80,22],[92,27,80,23,"size"],[92,31,80,27],[92,36,80,32],[92,37,80,33],[92,39,80,35],[93,10,81,6],[93,17,81,13,"keyframesEntry"],[93,31,81,27],[93,32,81,28,"usedBy"],[93,38,81,34],[93,39,81,35,"viewName"],[93,47,81,43],[93,48,81,44],[94,10,82,6],[94,14,82,6,"unregisterCSSKeyframes"],[94,20,82,28],[94,21,82,28,"unregisterCSSKeyframes"],[94,43,82,28],[94,45,82,29,"animationName"],[94,58,82,42],[94,60,82,44,"viewName"],[94,68,82,52],[94,69,82,53],[95,8,83,4],[96,8,85,4],[96,12,85,8,"Object"],[96,18,85,14],[96,19,85,15,"keys"],[96,23,85,19],[96,24,85,20,"keyframesEntry"],[96,38,85,34],[96,39,85,35,"usedBy"],[96,45,85,41],[96,46,85,42],[96,47,85,43,"length"],[96,53,85,49],[96,58,85,54],[96,59,85,55],[96,61,85,57],[97,10,86,6],[97,14,86,10],[97,15,86,11,"nameToKeyframes_"],[97,31,86,27],[97,32,86,28,"delete"],[97,38,86,34],[97,39,86,35,"animationName"],[97,52,86,48],[97,53,86,49],[98,10,87,6],[98,14,87,10],[98,15,87,11,"cssTextToNameMap_"],[98,32,87,28],[98,33,87,29,"delete"],[98,39,87,35],[98,40,87,36,"keyframesEntry"],[98,54,87,50],[98,55,87,51,"keyframesRule"],[98,68,87,64],[98,69,87,65,"cssText"],[98,76,87,72],[98,77,87,73],[99,8,88,4],[100,6,89,2],[101,4,89,3],[102,6,89,3,"key"],[102,9,89,3],[103,6,89,3,"value"],[103,11,89,3],[103,13,91,2],[103,22,91,2,"clear"],[103,27,91,7,"clear"],[103,28,91,7],[103,30,91,10],[104,8,92,4],[104,12,92,8],[104,13,92,9,"nameToKeyframes_"],[104,29,92,25],[104,30,92,26,"clear"],[104,35,92,31],[104,36,92,32],[104,37,92,33],[105,8,93,4],[105,12,93,8],[105,13,93,9,"cssTextToNameMap_"],[105,30,93,26],[105,31,93,27,"clear"],[105,36,93,32],[105,37,93,33],[105,38,93,34],[106,6,94,2],[107,4,94,3],[108,2,94,3],[109,2,97,0],[109,6,97,6,"cssKeyframesRegistry"],[109,26,97,26],[109,29,97,29],[109,33,97,33,"CSSKeyframesRegistry"],[109,53,97,53],[109,54,97,54],[109,55,97,55],[110,2,99,0],[110,6,99,0,"_default"],[110,14,99,0],[110,17,99,15,"cssKeyframesRegistry"],[110,37,99,35],[111,0,99,36],[111,3]],"functionMap":{"names":["<global>","CSSKeyframesRegistry","get","add","remove","clear"],"mappings":"AAA;ACgB;ECI;GDU;EEE;GFoC;EGE;GHkB;EIE;GJG;CDC"},"hasCjsExports":false},"type":"js/module"}]}