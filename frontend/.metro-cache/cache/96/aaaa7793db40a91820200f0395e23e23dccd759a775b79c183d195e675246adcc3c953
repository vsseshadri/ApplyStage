{"dependencies":[{"name":"./serializable","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":52,"index":67}}],"key":"HEAtJtq3tiB/J/VFN71ymR8EIJA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.__installUnpacker = __installUnpacker;\n  var _serializable = require(_dependencyMap[0], \"./serializable\");\n  function __installUnpacker() {\n    // TODO: Add cache for synchronizables.\n    var serializer = !globalThis._WORKLET || globalThis._WORKLETS_BUNDLE_MODE ? function (value, _) {\n      return (0, _serializable.createSerializable)(value);\n    } : globalThis._createSerializable;\n    function synchronizableUnpacker(synchronizableRef) {\n      var synchronizable = synchronizableRef;\n      var proxy = globalThis.__workletsModuleProxy;\n      synchronizable.__synchronizableRef = true;\n      synchronizable.getDirty = function () {\n        return proxy.synchronizableGetDirty(synchronizable);\n      };\n      synchronizable.getBlocking = function () {\n        return proxy.synchronizableGetBlocking(synchronizable);\n      };\n      synchronizable.setBlocking = function (valueOrFunction) {\n        var newValue;\n        if (typeof valueOrFunction === 'function') {\n          var func = valueOrFunction;\n          synchronizable.lock();\n          var prev = synchronizable.getBlocking();\n          newValue = func(prev);\n          proxy.synchronizableSetBlocking(synchronizable, serializer(newValue, undefined));\n          synchronizable.unlock();\n        } else {\n          var value = valueOrFunction;\n          newValue = value;\n          proxy.synchronizableSetBlocking(synchronizable, serializer(newValue, undefined));\n        }\n      };\n      synchronizable.lock = function () {\n        proxy.synchronizableLock(synchronizable);\n      };\n      synchronizable.unlock = function () {\n        proxy.synchronizableUnlock(synchronizable);\n      };\n      return synchronizable;\n    }\n    globalThis.__synchronizableUnpacker = synchronizableUnpacker;\n  }\n});","lineCount":49,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"__installUnpacker"],[7,27,6,0],[7,30,6,0,"__installUnpacker"],[7,47,6,0],[8,2,3,0],[8,6,3,0,"_serializable"],[8,19,3,0],[8,22,3,0,"require"],[8,29,3,0],[8,30,3,0,"_dependencyMap"],[8,44,3,0],[9,2,6,7],[9,11,6,16,"__installUnpacker"],[9,28,6,33,"__installUnpacker"],[9,29,6,33],[9,31,6,36],[10,4,7,2],[11,4,8,2],[11,8,8,8,"serializer"],[11,18,8,18],[11,21,9,4],[11,22,9,5,"globalThis"],[11,32,9,15],[11,33,9,16,"_WORKLET"],[11,41,9,24],[11,45,9,28,"globalThis"],[11,55,9,38],[11,56,9,39,"_WORKLETS_BUNDLE_MODE"],[11,77,9,60],[11,80,10,8],[11,90,10,9,"value"],[11,95,10,23],[11,97,10,25,"_"],[11,98,10,35],[12,6,10,35],[12,13,10,40],[12,17,10,40,"createSerializable"],[12,30,10,58],[12,31,10,58,"createSerializable"],[12,49,10,58],[12,51,10,59,"value"],[12,56,10,64],[12,57,10,65],[13,4,10,65],[13,8,11,8,"globalThis"],[13,18,11,18],[13,19,11,19,"_createSerializable"],[13,38,11,38],[14,4,13,2],[14,13,13,11,"synchronizableUnpacker"],[14,35,13,33,"synchronizableUnpacker"],[14,36,14,4,"synchronizableRef"],[14,53,14,48],[14,55,15,28],[15,6,16,4],[15,10,16,10,"synchronizable"],[15,24,16,24],[15,27,17,6,"synchronizableRef"],[15,44,17,60],[16,6,18,4],[16,10,18,10,"proxy"],[16,15,18,15],[16,18,18,18,"globalThis"],[16,28,18,28],[16,29,18,29,"__workletsModuleProxy"],[16,50,18,51],[17,6,20,4,"synchronizable"],[17,20,20,18],[17,21,20,19,"__synchronizableRef"],[17,40,20,38],[17,43,20,41],[17,47,20,45],[18,6,21,4,"synchronizable"],[18,20,21,18],[18,21,21,19,"getDirty"],[18,29,21,27],[18,32,21,30],[18,44,21,36],[19,8,22,6],[19,15,22,13,"proxy"],[19,20,22,18],[19,21,22,19,"synchronizableGetDirty"],[19,43,22,41],[19,44,22,42,"synchronizable"],[19,58,22,56],[19,59,22,57],[20,6,23,4],[20,7,23,5],[21,6,24,4,"synchronizable"],[21,20,24,18],[21,21,24,19,"getBlocking"],[21,32,24,30],[21,35,24,33],[21,47,24,39],[22,8,25,6],[22,15,25,13,"proxy"],[22,20,25,18],[22,21,25,19,"synchronizableGetBlocking"],[22,46,25,44],[22,47,25,45,"synchronizable"],[22,61,25,59],[22,62,25,60],[23,6,26,4],[23,7,26,5],[24,6,27,4,"synchronizable"],[24,20,27,18],[24,21,27,19,"setBlocking"],[24,32,27,30],[24,35,27,33],[24,45,28,6,"valueOrFunction"],[24,60,28,58],[24,62,29,9],[25,8,30,6],[25,12,30,10,"newValue"],[25,20,30,26],[26,8,31,6],[26,12,31,10],[26,19,31,17,"valueOrFunction"],[26,34,31,32],[26,39,31,37],[26,49,31,47],[26,51,31,49],[27,10,32,8],[27,14,32,14,"func"],[27,18,32,18],[27,21,32,21,"valueOrFunction"],[27,36,32,64],[28,10,33,8,"synchronizable"],[28,24,33,22],[28,25,33,23,"lock"],[28,29,33,27],[28,30,33,28],[28,31,33,29],[29,10,34,8],[29,14,34,14,"prev"],[29,18,34,18],[29,21,34,21,"synchronizable"],[29,35,34,35],[29,36,34,36,"getBlocking"],[29,47,34,47],[29,48,34,48],[29,49,34,49],[30,10,35,8,"newValue"],[30,18,35,16],[30,21,35,19,"func"],[30,25,35,23],[30,26,35,24,"prev"],[30,30,35,28],[30,31,35,29],[31,10,37,8,"proxy"],[31,15,37,13],[31,16,37,14,"synchronizableSetBlocking"],[31,41,37,39],[31,42,38,10,"synchronizable"],[31,56,38,24],[31,58,39,10,"serializer"],[31,68,39,20],[31,69,39,21,"newValue"],[31,77,39,29],[31,79,39,31,"undefined"],[31,88,39,40],[31,89,40,8],[31,90,40,9],[32,10,42,8,"synchronizable"],[32,24,42,22],[32,25,42,23,"unlock"],[32,31,42,29],[32,32,42,30],[32,33,42,31],[33,8,43,6],[33,9,43,7],[33,15,43,13],[34,10,44,8],[34,14,44,14,"value"],[34,19,44,19],[34,22,44,22,"valueOrFunction"],[34,37,44,37],[35,10,45,8,"newValue"],[35,18,45,16],[35,21,45,19,"value"],[35,26,45,24],[36,10,46,8,"proxy"],[36,15,46,13],[36,16,46,14,"synchronizableSetBlocking"],[36,41,46,39],[36,42,47,10,"synchronizable"],[36,56,47,24],[36,58,48,10,"serializer"],[36,68,48,20],[36,69,48,21,"newValue"],[36,77,48,29],[36,79,48,31,"undefined"],[36,88,48,40],[36,89,49,8],[36,90,49,9],[37,8,50,6],[38,6,51,4],[38,7,51,5],[39,6,52,4,"synchronizable"],[39,20,52,18],[39,21,52,19,"lock"],[39,25,52,23],[39,28,52,26],[39,40,52,32],[40,8,53,6,"proxy"],[40,13,53,11],[40,14,53,12,"synchronizableLock"],[40,32,53,30],[40,33,53,31,"synchronizable"],[40,47,53,45],[40,48,53,46],[41,6,54,4],[41,7,54,5],[42,6,55,4,"synchronizable"],[42,20,55,18],[42,21,55,19,"unlock"],[42,27,55,25],[42,30,55,28],[42,42,55,34],[43,8,56,6,"proxy"],[43,13,56,11],[43,14,56,12,"synchronizableUnlock"],[43,34,56,32],[43,35,56,33,"synchronizable"],[43,49,56,47],[43,50,56,48],[44,6,57,4],[44,7,57,5],[45,6,59,4],[45,13,59,11,"synchronizable"],[45,27,59,25],[46,4,60,2],[47,4,62,2,"globalThis"],[47,14,62,12],[47,15,62,13,"__synchronizableUnpacker"],[47,39,62,37],[47,42,62,40,"synchronizableUnpacker"],[47,64,62,62],[48,2,63,0],[49,0,63,1],[49,3]],"functionMap":{"names":["<global>","__installUnpacker","<anonymous>","synchronizableUnpacker","synchronizable.getDirty","synchronizable.getBlocking","synchronizable.setBlocking","synchronizable.lock","synchronizable.unlock"],"mappings":"AAA;OCK;QCI,yDD;EEG;8BCQ;KDE;iCEC;KFE;iCGC;KHwB;0BIC;KJE;4BKC;KLE;GFG;CDG"},"hasCjsExports":false},"type":"js/module"}]}